# Build configuration
[build]
  command = "npm run build"
  publish = "build"
  
# Specify Node.js version
[build.environment]
  NODE_VERSION = "18"

# No proxy redirects needed since we use direct backend URL
# CORS is handled by the backend configuration

# Proxy redirects to bypass Mixed Content (HTTPS -> HTTP)
[[redirects]]
  from = "/api/*"
  to = "http://86.48.24.125/api/:splat"
  status = 200
  force = true

# Single Page Application redirect configuration - KEEP THIS LAST
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Environment variables for development
[context.development.environment]
  REACT_APP_API_URL = "http://localhost:5000/api"

# Environment variables for production (to be managed in Netlify dashboard)
[context.production.environment]
  NODE_ENV = "production"

# Netlify serverless functions configuration (if needed)
[functions]
  directory = "netlify/functions"
